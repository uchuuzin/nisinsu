<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2進数の説明と変換ツール</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e3f2fd; /* 明るい水色 */
            color: #333;
        }
        .container {
            max-width: 800px;
        }
        .card {
            background-color: #fff; /* 白いカード */
            border: 1px solid #ddd;
        }
        .text-blue-600 {
            color: #2563eb;
        }
        .bg-blue-600 {
            background-color: #2563eb;
        }
        .ring-blue-400 {
            --tw-ring-color: #60a5fa;
        }
        input {
            transition: all 0.2s ease-in-out;
            outline: none;
            border: 2px solid transparent;
        }
        input:focus {
            border-color: #60a5fa;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.4);
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="container mx-auto p-4 sm:p-8 rounded-2xl shadow-xl card">
        <!-- 新しい解説部分 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 border-l-4 border-blue-600 pl-4">2進数の仕組み</h2>
            <p class="mb-4">
                私たちが普段使っていますのは、0から9までの10種類の数字を使う**10進数**です。ですが、コンピュータは「電気のON（ついている）」と「電気のOFF（消えている）」という2つの状態しか使うことができません。この2つの状態を数字で表したものが、**2進数**でございます。
            </p>
            <p class="mb-4">
                **ONを1**、**OFFを0**と決めることで、コンピュータはたった2つの数字だけで計算や文字の表示をこなしているのです。まるで、「〇」と「×」だけで様々なことを表現するゲームと考えてみればいいと思います。
            </p>
            <p class="mb-4">
                2進数を10進数に直すには、右から順番に、1、2、4、8、16、32…と、2倍ずつ大きくなっていく魔法のブロック（位）を思い浮かべてみてください。
            </p>
            <pre class="bg-gray-100 p-4 rounded-xl overflow-x-auto text-sm mb-4 ring-2 ring-blue-400">
2401 → 100101100001 の場合

    100101100001
    └──────┘
    ONとOFFのスイッチ

    左から右へ、スイッチがON(1)になっている場所だけを足し算してみましょう！
    (1)x2048 + (0)x1024 + (0)x512 + (1)x256 + (0)x128 + (1)x64 + (1)x32 + (0)x16 + (0)x8 + (0)x4 + (0)x2 + (1)x1
    = 2048 + 256 + 64 + 32 + 1
    = 2401
            </pre>
            <p class="mb-4">
                これなら、どんなに大きな数でも「0」と「1」だけで表すことができるのです。不思議なことですが、とても面白いですよね！
            </p>
        </div>

        <hr class="border-t-2 border-dashed border-blue-200 my-8">

        <!-- 新しい解説部分 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold mb-4 border-l-4 border-blue-600 pl-4">2進数への変換 裏技（割り算バージョン）</h2>
            <p class="mb-4">
                アホども（嘘）のために、もうひとつの裏技をお教えしましょう。これは、10進数を2でひたすら割り続けるだけの簡単な方法でございます。
            </p>
            <p class="mb-4">
                計算のポイントは、**「余り」をメモすること**、そして**最後に下から順番に並べること**、この2点だけでございます。
            </p>
            <pre class="bg-gray-100 p-4 rounded-xl overflow-x-auto text-sm mb-4 ring-2 ring-blue-400">
2401を2進数にする場合

    2401 ÷ 2 = 1200 ... 1  ← 右端の数字
    1200 ÷ 2 = 600  ... 0
    600  ÷ 2 = 300  ... 0
    300  ÷ 2 = 150  ... 0
    150  ÷ 2 = 75   ... 0
    75   ÷ 2 = 37   ... 1
    37   ÷ 2 = 18   ... 1
    18   ÷ 2 = 9    ... 0
    9    ÷ 2 = 4    ... 1
    4    ÷ 2 = 2    ... 0
    2    ÷ 2 = 1    ... 0
    1    ÷ 2 = 0    ... 1  ← 左端の数字

    余りを下から読むと...
    100101100001
            </pre>
            <p class="mb-4">
                これは簡単ですね？この方法なら、面倒な計算をすることなく、どんな数でもどんなアホでも2進数に変換できるのでございます。
            </p>
        </div>

        <hr class="border-t-2 border-dashed border-blue-200 my-8">

        <!-- 新しい変換ツール部分 -->
        <div>
            <h2 class="text-2xl font-semibold mb-4 border-l-4 border-blue-600 pl-4">数字の変換ツール</h2>
            <p class="mb-4">10進数、2進数、16進数の好きなところに数字を入れると、他の数字に自動で変換されるので、ぜひ使ってみてください。</p>
            
            <div class="flex flex-col space-y-4">
                <label class="block">
                    <span class="text-gray-700">10進数 (Decimal)</span>
                    <input type="number" id="decimalInput" class="mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:bg-white focus:border-blue-500 transition-all px-3 py-2">
                </label>
                <label class="block">
                    <span class="text-gray-700">2進数 (Binary)</span>
                    <input type="text" id="binaryInput" class="mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:bg-white focus:border-blue-500 transition-all px-3 py-2">
                </label>
                <label class="block">
                    <span class="text-gray-700">16進数 (Hexadecimal)</span>
                    <input type="text" id="hexInput" class="mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:bg-white focus:border-blue-500 transition-all px-3 py-2 uppercase">
                </label>
            </div>
        </div>
    </div>

    <script>
        const decimalInput = document.getElementById('decimalInput');
        const binaryInput = document.getElementById('binaryInput');
        const hexInput = document.getElementById('hexInput');

        // エラーメッセージの表示関数
        function showError(message) {
            const container = document.querySelector('.container');
            const existingError = document.getElementById('errorMessage');
            if (existingError) {
                existingError.remove();
            }
            const errorDiv = document.createElement('div');
            errorDiv.id = 'errorMessage';
            errorDiv.className = 'mt-4 p-4 text-center rounded-xl bg-red-100 text-red-700 font-bold';
            errorDiv.textContent = message;
            container.appendChild(errorDiv);
        }

        // 入力値のクリア
        function clearInputs(exceptId) {
            if (exceptId !== 'decimalInput') decimalInput.value = '';
            if (exceptId !== 'binaryInput') binaryInput.value = '';
            if (exceptId !== 'hexInput') hexInput.value = '';
            const existingError = document.getElementById('errorMessage');
            if (existingError) {
                existingError.remove();
            }
        }

        decimalInput.addEventListener('input', (e) => {
            const value = e.target.value;
            if (value === '') {
                clearInputs();
                return;
            }
            try {
                const decimal = parseInt(value, 10);
                if (isNaN(decimal)) {
                    showError("10進数には半角数字を入力してください。");
                    return;
                }
                clearInputs('decimalInput');
                binaryInput.value = decimal.toString(2);
                hexInput.value = decimal.toString(16).toUpperCase();
            } catch (error) {
                showError("10進数の入力が正しくありません。");
            }
        });

        binaryInput.addEventListener('input', (e) => {
            const value = e.target.value;
            if (value === '') {
                clearInputs();
                return;
            }
            if (!/^[01]+$/.test(value)) {
                showError("2進数には「0」と「1」だけを入力してください。");
                return;
            }
            try {
                const decimal = parseInt(value, 2);
                clearInputs('binaryInput');
                decimalInput.value = decimal;
                hexInput.value = decimal.toString(16).toUpperCase();
            } catch (error) {
                showError("2進数の入力が正しくありません。");
            }
        });

        hexInput.addEventListener('input', (e) => {
            const value = e.target.value.toUpperCase();
            if (value === '') {
                clearInputs();
                return;
            }
            if (!/^[0-9A-F]+$/.test(value)) {
                showError("16進数には「0-9」と「A-F」だけを入力してください。");
                return;
            }
            try {
                const decimal = parseInt(value, 16);
                clearInputs('hexInput');
                decimalInput.value = decimal;
                binaryInput.value = decimal.toString(2);
            } catch (error) {
                showError("16進数の入力が正しくありません。");
            }
        });
    </script>
</body>
</html>
